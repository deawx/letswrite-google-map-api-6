"use strict";var GoogleMap=new Vue({el:"#app",data:{loadingMask:!0,api:"https://script.google.com/macros/s/AKfycbycicX5-NDjA6FEbwfauuUSi4NSN4RXbEGSkqPMc3G9JDNA40s/exec",map:null,responseData:[],heatmapData:[],tabType:"confirmed"},methods:{initMap:function(){var e=this;fetch(this.api).then((function(e){return e.json()})).then((function(t){e.map=new google.maps.Map(document.getElementById("map"),{center:{lat:30.97564,lng:112.2707},zoom:5,mapTypeId:"roadmap",zoomControl:!1,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!0,styles:[{elementType:"geometry",stylers:[{color:"#263238"}]},{elementType:"labels.text.stroke",stylers:[{color:"#242f3e"}]},{elementType:"labels.text.fill",stylers:[{color:"#FFD54F"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#746855"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"geometry.stroke",stylers:[{color:"#746855"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#BCAAA4"}]},{featureType:"administrative.neighborhood",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#37474F"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#515c6d"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{color:"#263238"}]}]});var a=Object.keys(t),o=[];Array.prototype.forEach.call(a,(function(a){var r=t[a],n={};n.state=a,n.confirmed=t[a].confirmed,n.recovered=t[a].recovered,n.death=t[a].death,o.push(n);var i=new google.maps.LatLng(r.lat,r.lng),s=new google.maps.Marker({position:i,map:e.map}),l=new google.maps.InfoWindow({content:"\n                <h6>".concat(a,"</h6>\n                <p>確診：").concat(r.confirmed,"</p>\n                <p>康復：").concat(r.recovered,"</p>\n                <p>死亡：").concat(r.death,"</p>\n              ")});s.addListener("click",(function(t){l.open(e.map,s)}));var p={location:i,weight:r.confirmed};"Hubei"===a&&(p.weight=r.confirmed-1e4),e.heatmapData.push(p)})),e.responseData=o.sort((function(e,t){return e.confirmed>t.confirmed?-1:1})),new google.maps.visualization.HeatmapLayer({data:e.heatmapData,dissipating:!0,radius:40}).setMap(e.map),e.loadingMask=!1}))},showCount:function(e,t,a){return"confirmed"===this.tabType?e:"recovered"===this.tabType?t:"death"===this.tabType?a:void 0}},created:function(){var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBG9pWjn7gWHoqsNqTrU2EpWfZkyTlh6_I&libraries=visualization",document.head.appendChild(e),e.onload=this.initMap}});